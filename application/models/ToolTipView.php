<?phprequire_once 'Inf_Model.php';class ToolTipView extends Inf_Model {    private $obj_tooltip;    private $obj_treeView;    public function __construct() {        require_once 'ToolTipClass.php';        $this->obj_tooltip = new ToolTipClass();        require_once 'TreeView.php';        $this->obj_treeView = new TreeView();        require_once 'validation.php';        $this->obj_vali = new validation();    }    public function getUserDetails($id, $ft_individual = '') {        $user_detail = array();        $this->obj_tooltip->no_of_level = 4;        $arr[0] = $id;        $user_id1 = $this->obj_tooltip->getUsers($arr, $ft_individual);        //print_r($user_id1);        $qr = $this->obj_tooltip->createQuery($user_id1, $ft_individual);        //echo $qr;die();        if ($ft_individual == "") {            $user_detail = $this->obj_tooltip->getUserDetails($qr);        } else {            $user_detail = $this->obj_tooltip->getBoardUserDetails($qr);        }        // print_r($user_detail);        return $user_detail;    }    public function getUserDetail($id, $ft_individual = '') {        $user_detail = array();        $this->obj_tooltip->no_of_level = 4;        $arr[0] = $id;        //print_r($arr);        $user_id1 = $this->obj_tooltip->getSponsor($arr, $ft_individual);        //print_r($user_id1);        $qr = $this->obj_tooltip->createQuery($user_id1, $ft_individual);        //echo $qr;die();        if ($ft_individual == "") {            $user_detail = $this->obj_tooltip->getUserDetails($qr);        } else {            $user_detail = $this->obj_tooltip->getBoardUserDetails($qr);        }        // print_r($user_detail);        return $user_detail;    }    public function getSponserToolTip($user_detail) {        $string = "</head>";        $string .="<body>";        $base_url = base_url() . "public_html/";        for ($i = 1; $i <= count($user_detail); $i++) {            // $referal_count=$this->obj_treeView->getDirectReferalCount($user_detail["detail$i"]["id"]);            $active_status = $this->obj_vali->isUserActive($user_detail["detail$i"]["id"]);            if ($active_status) {                $string .= '<div id= "user' . $user_detail["detail$i"]["id"] . '"' . '>';                $string .= '<img width="100px" height="100px" src="' . $base_url . 'images/profile_picture/' . $user_detail["detail$i"]["user_photo"] . '" alt="' . $user_detail["detail$i"]["user_photo"] . '" align="absmiddle" />';                $string .= "<br /><b>Name:</b>" . $user_detail["detail$i"]["name"];                $string.="<br/><b>Joining:</b>" . $user_detail["detail$i"]["date"];                $string .= "</div>";            }        }        return $string;    }    public function getToolTip($user_detail) {        $string="";        $base_url = base_url() . "public_html/";        $count = count($user_detail);        for ($i = 1; $i <= $count; $i++) {            // $referal_count=$this->obj_treeView->getDirectReferalCount($user_detail["detail$i"]["id"]);            $active_status = $this->obj_vali->isUserActive($user_detail["detail$i"]["id"]);            if ($active_status) {                $string .= '<div id= "user' . $user_detail["detail$i"]["id"] . '"' . '>';                $string .= '<img width="100px" height="100px" src="' . $base_url . 'images/profile_picture/' . $user_detail["detail$i"]["user_photo"] . '" alt="' . $user_detail["detail$i"]["user_photo"] . '" align="absmiddle" />';                $string .= "<br/><b>Left:</b>" . $user_detail["detail$i"]["left"];                $string .= "<br/><b>Right:</b>" . $user_detail["detail$i"]["right"];                $string .= "<br /><b>Name:</b>" . $user_detail["detail$i"]["name"];                $string.="<br/><b>Joining:</b>" . $user_detail["detail$i"]["date"];                $string .= "</div>";            }        }        return $string;    }    public function getBoardToolTip($user_detail, $board_no) {        //print_r($user_detail);        $base_url = base_url() . "public_html/";        $count = count($user_detail);        for ($i = 1; $i <= $count; $i++) {            $referal_count = $this->obj_treeView->getDirectReferalCount($user_detail["detail$i"]["id"]);            $this->load->model("validation");            $user_name = $this->validation->idToUsernameBoard($user_detail["detail$i"]["id"], $board_no);            $string .= '<div id= "user' . $user_detail["detail$i"]["id"] . '"' . '>';            $string .= '<img width="80px" height="80px" src="' . $base_url . 'images/profile_picture/' . $user_detail["detail$i"]["user_photo"] . '" alt="' . $user_detail["detail$i"]["user_photo"] . '" align="absmiddle" />';            //$string .= "<br /><b>$user_name</b>";            $string .= "<br /><b>Name:</b>" . $user_detail["detail$i"]["name"];            $string .= " <br /><b>Referal Count:</b>" . $referal_count;            $string .= "</div>";        }        return $string;    }        ///////////////////////////////  EDITED BY YASIR   ////////////////////////////////////        public function getTwoReferralsBoard($user_ref_id, $board_no, $user_board_serial_number) {//        $referrals_arr = array();//        if ($user_ref_id != 0) {//////            $ref_count = intval($this->getRefCountAndCheck($user_ref_id, $board_no, $user_board_serial_number));////            $this->db->select('board.user_name')->from('board_view_referrals as refferals');//            $this->db->join("auto_board_$board_no as board", 'board.user_ref_id=refferals.board_referral_id', 'INNER');//            $this->db->where('board_user_id', $user_ref_id)->where('board_table_no', $board_no)->where('board_serial_no', $user_board_serial_number)->order_by('join_date', "ASC");////            if ($ref_count > 0) {////                $this->db->where('refferals.referral_type', "referral");////                $this->db->order_by('refferals.referral_type');////            }//            $this->db->limit(2);//            $res = $this->db->get();//            //echo"<br>qry>>" . $this->db->last_query();//            $i = 0;//            if ($res->num_rows > 0) {//                foreach ($res->result_array() AS $row) {//                    $referrals_arr[$i]['referral_username'] = $row['user_name'];//                    $i++;//                }//            }//        }////        return $referrals_arr;    }    ///////////////////////////////  EDITED BY YASIR   ////////////////////////////////////}